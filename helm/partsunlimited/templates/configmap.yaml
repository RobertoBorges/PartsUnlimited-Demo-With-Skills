apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "partsunlimited.fullname" . }}-config
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "partsunlimited.labels" . | nindent 4 }}
data:
  ASPNETCORE_ENVIRONMENT: "Production"
  ASPNETCORE_URLS: "http://+:8080"
  K8S_INGRESS: "true"
  Azure__KeyVault__VaultUri: {{ .Values.keyvault.vaultUri | quote }}
  ApplicationInsights__ConnectionString: {{ .Values.appInsights.connectionString | quote }}
  ConnectionStrings__DefaultConnectionString: >-
    Server={{ .Values.sql.server }};
    Database={{ .Values.sql.database }};
    Authentication=Active Directory Default;
    Encrypt=True;
    TrustServerCertificate=False;
  AzureAd__Instance: "https://login.microsoftonline.com/"
  AzureAd__TenantId: {{ .Values.entra.tenantId | quote }}
  AzureAd__ClientId: {{ .Values.entra.clientId | quote }}
  AzureAd__CallbackPath: "/signin-oidc"
  DataProtection__BlobUri: {{ .Values.dataProtection.blobUri | quote }}
  DataProtection__KeyVaultKeyId: {{ .Values.dataProtection.keyVaultKeyId | quote }}
